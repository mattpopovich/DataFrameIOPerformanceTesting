# DataFrame I/O Performance Testing
This repo was created to test the speed of reading and writing DataFrames to/from disk using different file and compression types.

## Target Audience
You have data. You read it, store it, and use it with Python/Pandas `DataFrame`s. You want to know what is the "best" way to do this.

## How This Repo Works
This repo will load data into a Pandas `DataFrame`. It will then write and read the `DataFrame` through all the many options that Python/Pandas provides. Lastly, it will give you a summary of the time it took to write to file, read from file, and the filesize.

You may need to modify the code such that your input file is read in correctly. My sample file, `data.csv` is time series data with the first column specifying the date and time.

## How to Use
Run the following file to perform analysis: `python3 analyze_dataframe_io.py`. A Dockerfile is provided to manage the repo's requirements.

The following arguments are supported:
- `-f` or `--file`
  - Specify the file used for input
- `-k` or `--keep`
  - Do not delete the generated files used for analysis in `/outputs`
- `-v` or `--verbose`
  - For every compression type that supports it, test different levels of compression

Example output of `analyze_dataframe_io.py` with a 7.4MB `.csv` file:
```
┏━━━━━━━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━┓
┃                ┃          ┃ Read     ┃          ┃           ┃            ┃            ┃            ┃
┃                ┃ Write    ┃ time     ┃          ┃ Output    ┃            ┃ Output     ┃ Score      ┃
┃                ┃ time to  ┃ from     ┃ Total    ┃ File Size ┃ Total I/O  ┃ File Size  ┃ (lower is  ┃
┃ Format         ┃ file (s) ┃ file (s) ┃ I/O (s)  ┃ (% Orig.) ┃ Normalized ┃ Normalized ┃ better)    ┃
┡━━━━━━━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━┩
│ pkl.zst        │ 0.009595 │ 0.005749 │ 0.015343 │ 6.259999  │ 1.579702   │ 1.694927   │ 3.274629   │
│ parquet.zstd   │ 0.019706 │ 0.005302 │ 0.025008 │ 11.759927 │ 2.574769   │ 3.184062   │ 5.75883    │
│ parquet.lz4    │ 0.019833 │ 0.004391 │ 0.024224 │ 12.35391  │ 2.494041   │ 3.344886   │ 5.838927   │
│ parquet.snappy │ 0.019545 │ 0.005768 │ 0.025314 │ 12.329412 │ 2.606244   │ 3.338253   │ 5.944496   │
│ feather        │ 0.011408 │ 0.004966 │ 0.016373 │ 15.818745 │ 1.68577    │ 4.283008   │ 5.968777   │
│ parquet        │ 0.020225 │ 0.010062 │ 0.030288 │ 15.835501 │ 3.118328   │ 4.287545   │ 7.405873   │
│ pkl.zip        │ 0.06082  │ 0.015542 │ 0.076362 │ 6.216931  │ 7.861998   │ 1.683266   │ 9.545265   │
│ parquet.brotli │ 0.066919 │ 0.006687 │ 0.073606 │ 8.443639  │ 7.578321   │ 2.286159   │ 9.86448    │
│ parquet.gzip   │ 0.066288 │ 0.01058  │ 0.076868 │ 8.955857  │ 7.914125   │ 2.424845   │ 10.33897   │
│ pkl.gzip       │ 0.005404 │ 0.004309 │ 0.009713 │ 50.474198 │ 1          │ 13.666152  │ 14.666152  │
│ pkl            │ 0.006847 │ 0.003859 │ 0.010706 │ 50.474198 │ 1.102297   │ 13.666152  │ 14.768449  │
│ orc            │ 0.02548  │ 0.00873  │ 0.03421  │ 49.057234 │ 3.5222     │ 13.282502  │ 16.804702  │
│ h5             │ 0.033859 │ 0.012699 │ 0.046557 │ 74.418713 │ 4.793442   │ 20.149255  │ 24.942696  │
│ csv.zst        │ 0.266167 │ 0.058622 │ 0.324788 │ 6.890039  │ 33.439392  │ 1.865514   │ 35.304906  │
│ csv.zip        │ 0.311108 │ 0.067511 │ 0.378619 │ 6.560124  │ 38.981648  │ 1.776188   │ 40.757836  │
│ pkl.xz         │ 0.403961 │ 0.030482 │ 0.434443 │ 4.891977  │ 44.729119  │ 1.324528   │ 46.053647  │
│ csv.gz         │ 0.451609 │ 0.068703 │ 0.520312 │ 5.955232  │ 53.569981  │ 1.61241    │ 55.182391  │
│ csv            │ 0.298025 │ 0.059291 │ 0.357316 │ 69.771367 │ 36.788354  │ 18.890961  │ 55.679315  │
│ pkl.bz2        │ 0.545014 │ 0.050732 │ 0.595746 │ 7.560752  │ 61.336465  │ 2.047113   │ 63.383578  │
│ csv.bz2        │ 0.554649 │ 0.110436 │ 0.665084 │ 5.06195   │ 68.475385  │ 1.370549   │ 69.845934  │
│ csv.xz         │ 1.898349 │ 0.083577 │ 1.981927 │ 3.693373  │ 204.054122 │ 1          │ 205.054122 │
└────────────────┴──────────┴──────────┴──────────┴───────────┴────────────┴────────────┴────────────┘
```

<details>
  <summary>Click to show the `--verbose` output for that file:</summary>

```
┏━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━┓
┃                ┃ DataFrame  ┃          ┃ Read     ┃          ┃           ┃            ┃            ┃            ┃            ┃
┃                ┃ Memory     ┃ Write    ┃ time     ┃          ┃ Output    ┃            ┃            ┃ Output     ┃ Score      ┃
┃                ┃ Difference ┃ time to  ┃ from     ┃ Total    ┃ File Size ┃ Equivalent ┃ Total I/O  ┃ File Size  ┃ (lower is  ┃
┃ Format         ┃ (B)        ┃ file (s) ┃ file (s) ┃ I/O (s)  ┃ (% Orig.) ┃ DataFrames ┃ Normalized ┃ Normalized ┃ better)    ┃
┡━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━┩
│ pkl.zst        │ 0          │ 0.010093 │ 0.005817 │ 0.01591  │ 6.259999  │ True       │ 1.911291   │ 1.694927   │ 3.606218   │
│ pkl.zst C=0    │ 0          │ 0.01102  │ 0.005438 │ 0.016459 │ 6.259999  │ True       │ 1.97724    │ 1.694927   │ 3.672167   │
│ pkl.zst C=1    │ 0          │ 0.008426 │ 0.006173 │ 0.0146   │ 7.205919  │ True       │ 1.753934   │ 1.95104    │ 3.704975   │
│ pkl.zst C=3    │ 0          │ 0.01114  │ 0.005815 │ 0.016955 │ 6.259999  │ True       │ 2.036877   │ 1.694927   │ 3.731804   │
│ pkl.zst C=-2   │ 0          │ 0.007635 │ 0.004762 │ 0.012397 │ 8.433393  │ True       │ 1.489253   │ 2.283385   │ 3.772638   │
│ pkl.zst C=-1   │ 0          │ 0.00803  │ 0.005398 │ 0.013427 │ 8.457066  │ True       │ 1.613057   │ 2.289795   │ 3.902851   │
│ pkl.zst C=2    │ 0          │ 0.009888 │ 0.006805 │ 0.016693 │ 7.386895  │ True       │ 2.005466   │ 2.00004    │ 4.005507   │
│ pkl.zst C=4    │ 0          │ 0.012578 │ 0.006807 │ 0.019385 │ 6.26341   │ True       │ 2.328824   │ 1.695851   │ 4.024674   │
│ pkl.zst C=-4   │ 0          │ 0.00722  │ 0.004638 │ 0.011858 │ 10.456359 │ True       │ 1.424541   │ 2.831114   │ 4.255654   │
│ pkl.zst C=-3   │ 0          │ 0.007442 │ 0.005027 │ 0.012468 │ 10.470016 │ True       │ 1.497863   │ 2.834811   │ 4.332674   │
│ pkl.zst C=5    │ 0          │ 0.018803 │ 0.005433 │ 0.024236 │ 6.112197  │ True       │ 2.911581   │ 1.654909   │ 4.56649    │
│ pkl.zst C=-5   │ 0          │ 0.00724  │ 0.005012 │ 0.012253 │ 12.00016  │ True       │ 1.471964   │ 3.249106   │ 4.72107    │
│ pkl.zst C=-6   │ 0          │ 0.007272 │ 0.004808 │ 0.01208  │ 12.674419 │ True       │ 1.451171   │ 3.431665   │ 4.882835   │
│ pkl.zst C=6    │ 0          │ 0.022441 │ 0.005056 │ 0.027496 │ 6.010062  │ True       │ 3.303265   │ 1.627256   │ 4.930521   │
│ pkl.zst C=7    │ 0          │ 0.023915 │ 0.005469 │ 0.029384 │ 5.983398  │ True       │ 3.530004   │ 1.620036   │ 5.15004    │
│ pkl.zst C=-7   │ 0          │ 0.007379 │ 0.005021 │ 0.0124   │ 13.951242 │ True       │ 1.489674   │ 3.777371   │ 5.267045   │
│ pkl.zst C=9    │ 0          │ 0.029383 │ 0.004897 │ 0.03428  │ 5.911297  │ True       │ 4.118243   │ 1.600515   │ 5.718757   │
│ pkl.zst C=8    │ 0          │ 0.030002 │ 0.005182 │ 0.035185 │ 5.911852  │ True       │ 4.226895   │ 1.600665   │ 5.827559   │
│ pkl.gzip C=1   │ 0          │ 0.021828 │ 0.011967 │ 0.033795 │ 7.061203  │ True       │ 4.059938   │ 1.911857   │ 5.971795   │
│ pkl.gzip C=2   │ 0          │ 0.022883 │ 0.011669 │ 0.034552 │ 6.892597  │ True       │ 4.150945   │ 1.866207   │ 6.017151   │
│ parquet.zstd   │ 0          │ 0.019226 │ 0.004649 │ 0.023875 │ 11.759927 │ True       │ 2.868198   │ 3.184062   │ 6.052259   │
│ feather        │ 0          │ 0.010503 │ 0.004447 │ 0.01495  │ 15.818745 │ True       │ 1.796012   │ 4.283008   │ 6.079019   │
│ parquet.lz4    │ 0          │ 0.018686 │ 0.004845 │ 0.023531 │ 12.35391  │ True       │ 2.826916   │ 3.344886   │ 6.171802   │
│ pkl.zip C=1    │ 0          │ 0.021666 │ 0.013793 │ 0.035459 │ 7.062367  │ True       │ 4.259877   │ 1.912173   │ 6.172049   │
│ parquet.snappy │ 0          │ 0.019284 │ 0.004717 │ 0.024001 │ 12.329412 │ True       │ 2.88339    │ 3.338253   │ 6.221642   │
│ pkl.zip C=2    │ 0          │ 0.02355  │ 0.01284  │ 0.03639  │ 6.893761  │ True       │ 4.371742   │ 1.866522   │ 6.238264   │
│ pkl.gzip C=3   │ 0          │ 0.026587 │ 0.011662 │ 0.038248 │ 6.793332  │ True       │ 4.594917   │ 1.83933    │ 6.434247   │
│ pkl.zip C=3    │ 0          │ 0.02564  │ 0.012885 │ 0.038525 │ 6.794496  │ True       │ 4.628199   │ 1.839645   │ 6.467844   │
│ pkl.gzip C=4   │ 0          │ 0.028167 │ 0.011627 │ 0.039794 │ 6.523214  │ True       │ 4.780585   │ 1.766194   │ 6.546779   │
│ pkl.zip C=4    │ 0          │ 0.028895 │ 0.01306  │ 0.041955 │ 6.524378  │ True       │ 5.040271   │ 1.766509   │ 6.80678    │
│ pkl.zst C=10   │ 0          │ 0.04342  │ 0.00502  │ 0.04844  │ 5.890873  │ True       │ 5.819278   │ 1.594985   │ 7.414263   │
│ pkl.gzip C=5   │ 0          │ 0.036207 │ 0.011361 │ 0.047568 │ 6.338394  │ True       │ 5.714611   │ 1.716153   │ 7.430764   │
│ pkl.zip C=5    │ 0          │ 0.035217 │ 0.013168 │ 0.048384 │ 6.339558  │ True       │ 5.812611   │ 1.716468   │ 7.529079   │
│ parquet        │ 0          │ 0.019302 │ 0.008604 │ 0.027905 │ 15.835501 │ True       │ 3.3524     │ 4.287545   │ 7.639945   │
│ pkl.zst C=13   │ 0          │ 0.060772 │ 0.004766 │ 0.065538 │ 5.893106  │ True       │ 7.873364   │ 1.595589   │ 9.468953   │
│ pkl.gzip C=6   │ 0          │ 0.058818 │ 0.010763 │ 0.06958  │ 6.215821  │ True       │ 8.359003   │ 1.682966   │ 10.041969  │
│ pkl.zst C=11   │ 0          │ 0.06709  │ 0.0047   │ 0.071791 │ 5.876851  │ True       │ 8.624531   │ 1.591188   │ 10.215719  │
│ pkl.zst C=12   │ 0          │ 0.067499 │ 0.004828 │ 0.072327 │ 5.876837  │ True       │ 8.688948   │ 1.591184   │ 10.280132  │
│ pkl.zip C=6    │ 0          │ 0.058926 │ 0.012946 │ 0.071872 │ 6.216985  │ True       │ 8.634301   │ 1.683281   │ 10.317583  │
│ pkl.zip        │ 0          │ 0.059209 │ 0.012966 │ 0.072175 │ 6.216931  │ True       │ 8.670722   │ 1.683266   │ 10.353989  │
│ pkl.gzip C=-1  │ 0          │ 0.061615 │ 0.011566 │ 0.073181 │ 6.215834  │ True       │ 8.791533   │ 1.68297    │ 10.474502  │
│ pkl.zip C=0    │ 0          │ 0.061109 │ 0.014306 │ 0.075415 │ 6.216985  │ True       │ 9.059968   │ 1.683281   │ 10.743249  │
│ parquet.gzip   │ 0          │ 0.065271 │ 0.006228 │ 0.071499 │ 8.955857  │ True       │ 8.589471   │ 2.424845   │ 11.014316  │
│ parquet.brotli │ 0          │ 0.067736 │ 0.006591 │ 0.074328 │ 8.443639  │ True       │ 8.929327   │ 2.286159   │ 11.215486  │
│ pkl.zst C=14   │ 0          │ 0.078728 │ 0.004802 │ 0.08353  │ 5.872438  │ True       │ 10.03487   │ 1.589993   │ 11.624864  │
│ pkl.gzip C=7   │ 0          │ 0.081777 │ 0.01082  │ 0.092597 │ 6.247966  │ True       │ 11.12411   │ 1.691669   │ 12.81578   │
│ pkl.xz C=1     │ 0          │ 0.06752  │ 0.029521 │ 0.097041 │ 5.027706  │ True       │ 11.658033  │ 1.361278   │ 13.019311  │
│ pkl.zip C=7    │ 0          │ 0.083025 │ 0.012819 │ 0.095844 │ 6.24913   │ True       │ 11.514222  │ 1.691985   │ 13.206207  │
│ pkl.xz C=2     │ 0          │ 0.07767  │ 0.030201 │ 0.107871 │ 5.004751  │ True       │ 12.959071  │ 1.355062   │ 14.314133  │
│ pkl.gzip       │ 0          │ 0.004596 │ 0.003728 │ 0.008324 │ 50.474198 │ True       │ 1          │ 13.666152  │ 14.666152  │
│ pkl.gzip C=0   │ 0          │ 0.004779 │ 0.004061 │ 0.00884  │ 50.474198 │ True       │ 1.06197    │ 13.666152  │ 14.728122  │
│ pkl.zst C=15   │ 0          │ 0.104835 │ 0.004874 │ 0.109708 │ 5.864371  │ True       │ 13.179758  │ 1.587809   │ 14.767567  │
│ pkl            │ 0          │ 0.005416 │ 0.004053 │ 0.009469 │ 50.474198 │ True       │ 1.137534   │ 13.666152  │ 14.803687  │
│ pkl.xz C=3     │ 0          │ 0.087634 │ 0.030734 │ 0.118368 │ 4.995114  │ True       │ 14.220118  │ 1.352453   │ 15.572571  │
│ orc            │ 0          │ 0.025807 │ 0.008611 │ 0.034418 │ 49.057234 │ True       │ 4.134821   │ 13.282502  │ 17.417323  │
│ pkl.zst C=16   │ 0          │ 0.166877 │ 0.004933 │ 0.17181  │ 5.737562  │ True       │ 20.640365  │ 1.553475   │ 22.19384   │
│ pkl.zst C=17   │ 0          │ 0.18454  │ 0.004892 │ 0.189432 │ 5.59623   │ True       │ 22.757376  │ 1.515208   │ 24.272584  │
│ h5             │ 709932     │ 0.032177 │ 0.012221 │ 0.044398 │ 74.418713 │ True       │ 5.333759   │ 20.149255  │ 25.483014  │
│ pkl.gzip C=8   │ 0          │ 0.189959 │ 0.010842 │ 0.2008   │ 6.271206  │ True       │ 24.123066  │ 1.697962   │ 25.821027  │
│ pkl.zip C=8    │ 0          │ 0.190893 │ 0.012693 │ 0.203586 │ 6.27237   │ True       │ 24.457711  │ 1.698277   │ 26.155988  │
│ pkl.zst C=18   │ 0          │ 0.229781 │ 0.004956 │ 0.234737 │ 5.558548  │ True       │ 28.200038  │ 1.505006   │ 29.705043  │
│ pkl.xz C=4     │ 0          │ 0.221198 │ 0.030134 │ 0.251332 │ 5.034149  │ True       │ 30.193681  │ 1.363022   │ 31.556703  │
│ pkl.xz C=5     │ 0          │ 0.269661 │ 0.031883 │ 0.301543 │ 4.949257  │ True       │ 36.225787  │ 1.340037   │ 37.565825  │
│ csv.zst        │ 0          │ 0.271485 │ 0.059696 │ 0.331181 │ 6.890039  │ True       │ 39.786295  │ 1.865514   │ 41.651809  │
│ csv.zip        │ 0          │ 0.314538 │ 0.066884 │ 0.381422 │ 6.560124  │ True       │ 45.821986  │ 1.776188   │ 47.598174  │
│ pkl.zip C=9    │ 0          │ 0.399568 │ 0.013826 │ 0.413395 │ 6.271395  │ True       │ 49.663004  │ 1.698013   │ 51.361017  │
│ pkl.xz C=9     │ 0          │ 0.407065 │ 0.029899 │ 0.436964 │ 4.891977  │ True       │ 52.49443   │ 1.324528   │ 53.818958  │
│ pkl.xz C=8     │ 0          │ 0.412661 │ 0.030079 │ 0.44274  │ 4.891977  │ True       │ 53.188392  │ 1.324528   │ 54.512921  │
│ pkl.xz         │ 0          │ 0.410327 │ 0.032487 │ 0.442814 │ 4.891977  │ True       │ 53.197262  │ 1.324528   │ 54.521791  │
│ pkl.xz C=6     │ 0          │ 0.412779 │ 0.030283 │ 0.443062 │ 4.891977  │ True       │ 53.227091  │ 1.324528   │ 54.551619  │
│ pkl.zst C=19   │ 0          │ 0.437868 │ 0.004972 │ 0.44284  │ 5.50522   │ True       │ 53.200401  │ 1.490567   │ 54.690968  │
│ pkl.zst C=20   │ 0          │ 0.441622 │ 0.005057 │ 0.446679 │ 5.50522   │ True       │ 53.661547  │ 1.490567   │ 55.152114  │
│ pkl.bz2 C=2    │ 0          │ 0.395222 │ 0.047625 │ 0.442846 │ 7.371167  │ True       │ 53.201162  │ 1.995782   │ 55.196944  │
│ pkl.xz C=7     │ 0          │ 0.426313 │ 0.031703 │ 0.458017 │ 4.891977  │ True       │ 55.023623  │ 1.324528   │ 56.348152  │
│ pkl.gzip C=9   │ 0          │ 0.450794 │ 0.011412 │ 0.462206 │ 6.270231  │ True       │ 55.526862  │ 1.697698   │ 57.22456   │
│ pkl.bz2 C=1    │ 0          │ 0.414594 │ 0.046596 │ 0.46119  │ 7.305022  │ True       │ 55.404895  │ 1.977873   │ 57.382768  │
│ pkl.bz2 C=3    │ 0          │ 0.428229 │ 0.050006 │ 0.478235 │ 7.413681  │ True       │ 57.452579  │ 2.007293   │ 59.459871  │
│ pkl.bz2 C=4    │ 0          │ 0.437765 │ 0.048443 │ 0.486207 │ 7.433022  │ True       │ 58.410312  │ 2.01253    │ 60.422841  │
│ pkl.bz2 C=5    │ 0          │ 0.442938 │ 0.048302 │ 0.49124  │ 7.520052  │ True       │ 59.014904  │ 2.036093   │ 61.050997  │
│ pkl.bz2 C=6    │ 0          │ 0.461436 │ 0.048453 │ 0.50989  │ 7.548097  │ True       │ 61.255388  │ 2.043687   │ 63.299075  │
│ csv.gz         │ 0          │ 0.451804 │ 0.065576 │ 0.517379 │ 5.955232  │ True       │ 62.155131  │ 1.61241    │ 63.767541  │
│ csv            │ 0          │ 0.317309 │ 0.056417 │ 0.373727 │ 69.771367 │ True       │ 44.897496  │ 18.890961  │ 63.788457  │
│ pkl.zst C=21   │ 0          │ 0.536434 │ 0.005072 │ 0.541505 │ 5.502094  │ True       │ 65.053513  │ 1.489721   │ 66.543233  │
│ pkl.xz C=0     │ 0          │ 0.521497 │ 0.032909 │ 0.554406 │ 4.891977  │ True       │ 66.603359  │ 1.324528   │ 67.927887  │
│ pkl.bz2 C=8    │ 0          │ 0.500338 │ 0.052122 │ 0.55246  │ 7.539475  │ True       │ 66.369512  │ 2.041352   │ 68.410864  │
│ pkl.bz2 C=7    │ 0          │ 0.507298 │ 0.048817 │ 0.556115 │ 7.549301  │ True       │ 66.808624  │ 2.044013   │ 68.852636  │
│ pkl.bz2 C=9    │ 0          │ 0.53631  │ 0.050335 │ 0.586645 │ 7.560752  │ True       │ 70.476377  │ 2.047113   │ 72.52349   │
│ pkl.bz2        │ 0          │ 0.536112 │ 0.050568 │ 0.58668  │ 7.560752  │ True       │ 70.480507  │ 2.047113   │ 72.52762   │
│ csv.bz2        │ 0          │ 0.544665 │ 0.109242 │ 0.653907 │ 5.06195   │ True       │ 78.556788  │ 1.370549   │ 79.927337  │
│ pkl.zst C=22   │ 0          │ 0.673712 │ 0.005892 │ 0.679604 │ 5.500429  │ True       │ 81.643951  │ 1.48927    │ 83.133221  │
│ csv.xz         │ 0          │ 1.982927 │ 0.082158 │ 2.065085 │ 3.693373  │ True       │ 248.088124 │ 1          │ 249.088124 │
└────────────────┴────────────┴──────────┴──────────┴──────────┴───────────┴────────────┴────────────┴────────────┴────────────┘
```

</details>
